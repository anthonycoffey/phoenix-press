"use strict";(self.webpackChunkphoenix_press=self.webpackChunkphoenix_press||[]).push([[62],{5062:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var n=a(1609),l=a.n(n),i=a(4977),o=a(3650),r=a(7636),s=a(5583),c=a(4073),u=a(3313),m=a(7458),p=a(8587),d=a(8168),y=a(4164),h=a(5659),v=a(1848),f=a(7362),b=a(8413),E=a(3990);function A(e){return(0,E.Ay)("MuiCardActions",e)}(0,b.A)("MuiCardActions",["root","spacing"]);var S=a(4848);const w=["disableSpacing","className"],g=(0,v.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,d.A)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})));var C=n.forwardRef((function(e,t){const a=(0,f.b)({props:e,name:"MuiCardActions"}),{disableSpacing:n=!1,className:l}=a,i=(0,p.A)(a,w),o=(0,d.A)({},a,{disableSpacing:n}),r=(e=>{const{classes:t,disableSpacing:a}=e,n={root:["root",!a&&"spacing"]};return(0,h.A)(n,A,t)})(o);return(0,S.jsx)(g,(0,d.A)({className:(0,y.A)(r.root,l),ownerState:o,ref:t},i))})),_=a(4798),L=[{name:"full_name",type:"row",title:"Contact Information",label:"Please enter your contact information.",inputs:[{name:"full_name",type:"text",label:"Enter your name",value:"",optional:!0}]},{name:"phone",inputs:[{name:"phone",type:"tel",label:"Enter your phone number",value:"",optional:!1},{name:"sms_consent",type:"checkbox",label:"Yes, send me SMS updates and notifications to keep me informed about my roadside service request.",value:!1,optional:!0}]},{name:"service_time",type:"row",title:"When do you need service?",label:"Please verify service date and time.",inputs:[{value:"",type:"datetime",name:"service_time",selected:"",optional:!1}]},{name:"location",type:"row",title:"Where is the vehicle located?",label:"Please verify service location.",inputs:[{name:"location",type:"geo",label:"Search for your location",value:"",obj:{},optional:!0}]},{type:"row",title:"Vehicle Details",label:"Year, Make, Model, and Color",inputs:[{name:"car_year",type:"text",label:"Year",value:"",optional:!0},{name:"car_make",type:"text",label:"Make",value:"",optional:!0},{name:"car_model",type:"text",label:"Model",value:"",optional:!0},{name:"car_color",type:"text",label:"Color",value:"",optional:!0}]},{name:"service_type",inputs:[{value:[],valueId:null,type:"select",name:"service_type",optionsKey:"serviceOptions",options:[],optional:!1}]},{inputs:[{name:"notes",type:"text",label:"Additional Information",value:"",optional:!0}]}];const x=["full_name","phone","service_time","location","service_type"],k=(e,t)=>t.every((t=>((e,t)=>{const a=t.find((t=>t.name===e));return a&&I[e](a.value)})(t,e))),I={full_name:e=>""!==e.trim(),phone:e=>""!==e.trim(),service_time:e=>!isNaN(new Date(e).getTime()),location:e=>""!==e.trim(),service_type:e=>Array.isArray(e)&&e.length>0},T=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,4942)))),D=(0,n.lazy)((()=>a.e(425).then(a.bind(a,8425)))),O=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,728))));function M(){const[e]=(0,n.useState)(L||!1),[t,a]=(0,n.useState)(!1),[p,d]=(0,n.useState)(!1),[y,h]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),[b,E]=(0,n.useState)(null),[A,S]=(0,n.useState)(new Date),[w,g]=(0,n.useState)(!1),[I,M]=(0,n.useState)(null);(0,n.useEffect)((()=>{if(window.turnstile){const e=window.turnstile.render("#turnstile-widget",{sitekey:LOCALIZED.TURNSTILE_SITE_KEY,callback:e=>{M(e)},"expired-callback":()=>{window.turnstile.reset(e)}})}}),[]);const N=({input:e,event:t})=>{e.value=t?.target?.value},P=({input:e,event:t})=>{e.value=t,S(t)},R=(a=!1)=>{if(!t||!I)return!1;(async(a=!1)=>{if(!I&&!t)return!1;d(!0);const n=e.flatMap((e=>e.inputs.map((e=>{const{name:t,value:a,obj:n}=e;return n?{name:t,value:a,obj:n}:{name:t,value:a}})))),l={"Content-Type":"application/json","X-Turnstile-Token":I},i=window.location.origin.replace(/^https?:\/\//,"")+window.location.pathname.replace(/\/$/,"");if(!I)return!1;try{const e=k(n,x);if(b)await fetch(`${LOCALIZED.API_URL}/submit-lead-form/${b}`,{method:"PUT",headers:l,body:JSON.stringify({submission:n,source:i,completed:e})});else{v||(f(!0),window?.dataLayer&&window.dataLayer.push({event:"form_start"}));const t=await fetch(`${LOCALIZED.API_URL}/submit-lead-form`,{method:"POST",headers:l,body:JSON.stringify({submission:n,source:i,completed:e})}),a=await t.json();a?.id&&E(a?.id)}a&&h(!0)}catch(e){console.error("There was an error",e)}finally{d(!1)}})(a)},j=({input:e,event:t})=>{const{checked:a}=t?.target;e.value=a,g(a),R()};return l().createElement("section",null,l().createElement(i.A,{className:"phoenix-form"},LOCALIZED.FORM_TITLE&&l().createElement(o.A,{title:LOCALIZED.FORM_TITLE,subheader:LOCALIZED.FORM_SUBTITLE}),y&&l().createElement(r.A,null,l().createElement(s.A,{space:2},l().createElement(T,{question:{prompt:LOCALIZED.SUBMISSION_MESSAGE}}))),!y&&l().createElement("form",{"aria-label":"Form Description",autoComplete:"on",noValidate:!0},l().createElement(r.A,null,l().createElement(s.A,{space:4},e?.map(((e,t)=>"row"===e.type?l().createElement(l().Fragment,null,l().createElement(c.A,{variant:"subtitle1",sx:{mt:"1rem"},color:"textSecondary"},e.title,l().createElement(c.A,{variant:"subtitle2",color:"textSecondary"},e.label)),l().createElement(u.A,{key:t,display:"flex",flexDirection:"row",sx:{width:"100%"},gap:2},e.inputs.map(((e,t)=>l().createElement(D,{key:t,input:e,handleTextChange:N,handleDateChange:P,handleConsentChange:j,selectedDate:A,setValidPhoneNumber:a,checked:w,setChecked:g,handleBlur:R}))))):e.inputs.map(((e,t)=>l().createElement(D,{key:t,input:e,handleTextChange:N,handleDateChange:P,handleConsentChange:j,selectedDate:A,setValidPhoneNumber:a,checked:w,setChecked:g,handleBlur:R})))))),l().createElement(u.A,null,l().createElement(O,{index:0})),l().createElement("div",{id:"turnstile-widget",className:"cf-turnstile",style:{display:"flex",justifyContent:"center",margin:"1rem 0",padding:"1rem"},"data-sitekey":LOCALIZED.TURNSTILE_SITE_KEY}),l().createElement(l().Fragment,null,p&&l().createElement(m.A,null))),l().createElement(C,{sx:{justifyContent:"end"}},l().createElement(_.A,{variant:"contained",color:"primary",onClick:()=>{R(!0)},disabled:p||!t||!I},"Submit")))))}}}]);
//# sourceMappingURL=62.d545ad3c16e5d11f0c33.js.map