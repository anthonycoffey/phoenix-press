"use strict";(self.webpackChunkphoenix_press=self.webpackChunkphoenix_press||[]).push([[483],{4338:function(e,t,n){var a=n(1609),r=n(9502),l=n(900);t.A=({index:e})=>0===e&&(0,a.createElement)(a.Fragment,null,LOCALIZED.DISCLAIMER_MESSAGE&&(0,a.createElement)(r.A,{severity:"info",sx:{padding:"1rem"}},(0,l.Ay)(LOCALIZED.DISCLAIMER_MESSAGE)))},5483:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe}});var a=n(1609),r=n(6087),l=n(3313),o=n(6990),i=n(4977),s=n(7636),c=n(8587),u=n(8168),d=n(4164),m=n(5659),p=n(1848),h=n(7362),v=n(8413),f=n(3990);function g(e){return(0,f.Ay)("MuiCardActions",e)}(0,v.A)("MuiCardActions",["root","spacing"]);var A=n(4848);const y=["disableSpacing","className"],E=(0,p.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,u.A)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})));var b=a.forwardRef((function(e,t){const n=(0,h.b)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:r}=n,l=(0,c.A)(n,y),o=(0,u.A)({},n,{disableSpacing:a}),i=(e=>{const{classes:t,disableSpacing:n}=e,a={root:["root",!n&&"spacing"]};return(0,m.A)(a,g,t)})(o);return(0,A.jsx)(E,(0,u.A)({className:(0,d.A)(i.root,r),ownerState:o,ref:t},l))})),S=n(5583),w=n(4073),C=n(7458),x=n(3650),k=n(3455),_=n(5737),I=n(8014),L=n(2687),M=n(8870),D=n(5694),T=n(7437),P=n(8466);function N(e){return(0,f.Ay)("MuiCircularProgress",e)}(0,v.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const R=["className","color","disableShrink","size","style","thickness","value","variant"];let $,O,B,j,Z=e=>e;const z=(0,T.i7)($||($=Z`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),U=(0,T.i7)(O||(O=Z`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),V=(0,p.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,P.A)(n.color)}`]]}})((({ownerState:e,theme:t})=>(0,u.A)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,T.AH)(B||(B=Z`
      animation: ${0} 1.4s linear infinite;
    `),z))),W=(0,p.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),q=(0,p.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,P.A)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,u.A)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,T.AH)(j||(j=Z`
      animation: ${0} 1.4s ease-in-out infinite;
    `),U)));var F=a.forwardRef((function(e,t){const n=(0,h.b)({props:e,name:"MuiCircularProgress"}),{className:a,color:r="primary",disableShrink:l=!1,size:o=40,style:i,thickness:s=3.6,value:p=0,variant:v="indeterminate"}=n,f=(0,c.A)(n,R),g=(0,u.A)({},n,{color:r,disableShrink:l,size:o,thickness:s,value:p,variant:v}),y=(e=>{const{classes:t,variant:n,color:a,disableShrink:r}=e,l={root:["root",n,`color${(0,P.A)(a)}`],svg:["svg"],circle:["circle",`circle${(0,P.A)(n)}`,r&&"circleDisableShrink"]};return(0,m.A)(l,N,t)})(g),E={},b={},S={};if("determinate"===v){const e=2*Math.PI*((44-s)/2);E.strokeDasharray=e.toFixed(3),S["aria-valuenow"]=Math.round(p),E.strokeDashoffset=`${((100-p)/100*e).toFixed(3)}px`,b.transform="rotate(-90deg)"}return(0,A.jsx)(V,(0,u.A)({className:(0,d.A)(y.root,a),style:(0,u.A)({width:o,height:o},b,i),ownerState:g,ref:t,role:"progressbar"},S,f,{children:(0,A.jsx)(W,{className:y.svg,ownerState:g,viewBox:"22 22 44 44",children:(0,A.jsx)(q,{className:y.circle,style:E,ownerState:g,cx:44,cy:44,r:(44-s)/2,fill:"none",strokeWidth:s})})}))})),G=n(7289),K=n(1769);const Y=e=>{const t={};if(!e)return t;const n=e.find((e=>e.types.includes("street_number")))?.long_name,a=e.find((e=>e.types.includes("route")))?.short_name;return t.address_1=n&&a?`${n} ${a}`:"",t.city=e.find((e=>e.types.includes("locality")))?.long_name||"",t.state=e.find((e=>e.types.includes("administrative_area_level_1")))?.short_name||"",t.country=e.find((e=>e.types.includes("country")))?.short_name||"",t.zipcode=e.find((e=>e.types.includes("postal_code")))?.long_name||"",t},H=["places"];function J({input:e,handleBlur:t}){const[n,l]=(0,r.useState)(!1),[i,s]=(0,r.useState)({}),c=(0,r.useRef)(null),{isLoaded:u,loadError:d}=(0,K.RH)({googleMapsApiKey:LOCALIZED?.GMAPS_API_KEY,libraries:H});(0,r.useEffect)((()=>{if(!c.current||!window.google)return;const e=new window.google.maps.places.Autocomplete(c.current);return e.addListener("place_changed",(()=>{try{const t=e.getPlace(),n=Y(t.address_components);m(n)}catch(e){console.error("Error handling place_changed event:",e)}})),()=>{window.google.maps.event.clearInstanceListeners(e)}}),[u]);const m=t=>{t.nativeEvent instanceof Event?e.value=t.target.value:(e.obj=t,e.value=`${t.address_1}, ${t.city}, ${t.state} ${t.zipcode}`);const n=p(e);s((t=>({...t,[e.name]:n})))},p=e=>{if(!e.optional)return e.value.trim()?"":"This field is required"};return d?(console.error("Error loading maps:",d),(0,a.createElement)("div",null,"Error loading maps")):u?(0,a.createElement)(S.A,{spacing:2,direction:"column",sx:{marginTop:"1rem",display:"flex",width:"100%"}},(0,a.createElement)(D.A,{label:e.label,name:e.name,value:e.value,onChange:m,onBlur:t,variant:"outlined",margin:"normal",fullWidth:!0,inputRef:c,InputProps:{endAdornment:n?(0,a.createElement)(F,{size:20}):null},required:!e.optional,error:!!i[e.name],helperText:i[e.name]}),(0,a.createElement)(o.A,{variant:"contained","aria-label":"Use my location",color:"primary",onClick:()=>{navigator.geolocation?(l(!0),navigator.geolocation.getCurrentPosition((e=>{const{latitude:n,longitude:a}=e.coords;(new window.google.maps.Geocoder).geocode({location:{lat:n,lng:a}},((e,n)=>{if(l(!1),"OK"===n&&e[0]){const n=Y(e[0].address_components);m(n),t()}else console.error("Geocoder failed due to:",n)}))}),(e=>{l(!1),console.error("Error in getting geolocation:",e)}))):console.error("Geolocation is not supported by your browser.")},disabled:n},n?(0,a.createElement)(F,{size:20}):(0,a.createElement)(G.A,null),"Use My Current Location")):(0,a.createElement)(C.A,null)}function X({input:e,setValidPhoneNumber:t,handleBlur:n}){const[l,o]=(0,r.useState)({});return(0,a.createElement)(D.A,{label:e.label,name:e.name,value:e.value,onChange:n=>{const{value:a}=n.target,r=(e=>{const t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`})(a),i=(e=>{const n=10!==e.replace(/\D/g,"").length;return t(!0),n?"Valid phone number is required.":""})(r);o({...l,[e.name]:i}),e.value=r},onBlur:n,fullWidth:!0,variant:"outlined",margin:"normal",type:"tel",required:!e.optional,error:!!l[e.name],helperText:l[e.name]})}var Q=n(779),ee=n(8864),te=n(5724),ne=n(4389),ae=n(9307),re=n(6892);function le({input:e,handleBlur:t}){const[n,o]=(0,r.useState)([]),i=e=>{const{value:n,checked:a}=e.target;o((e=>a?[...e,n]:e.filter((e=>e!==n)))),t()};return(0,r.useEffect)((()=>{if(re.A&&n.length>0){const t=re.A.filter((e=>n.includes(e.value)));e.value=t.map((e=>({value:e.value,id:e.id})))}}),[n]),(0,a.createElement)(Q.A,{component:"fieldset",fullWidth:!0,margin:"dense"},(0,a.createElement)(ae.A,{component:"legend"},"Select desired service(s)"),(0,a.createElement)(te.A,null,(0,a.createElement)(l.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:1,padding:0}},re.A&&re.A?.map((e=>(0,a.createElement)(ee.A,{sx:{margin:0},control:(0,a.createElement)(ne.A,{value:e.value,checked:n.includes(e.value),onChange:i,name:e.name,size:"small"}),label:e.text}))))))}var oe=n(900),ie=({input:e,handleTextChange:t,handleDateChange:n,handleConsentChange:l,selectedDate:o,setValidPhoneNumber:i,checked:s,handleBlur:c})=>{switch((0,r.useEffect)((()=>("datetime"===e.type&&n({input:e,event:o}),()=>{})),[e,o,n]),e.type){case"tel":return(0,a.createElement)(X,{input:e,setValidPhoneNumber:i,handleBlur:c});case"text":return(0,a.createElement)(D.A,{label:e.label,name:e.name,onChange:n=>t({input:e,event:n}),onBlur:c,fullWidth:!0,variant:"outlined",margin:"normal",required:!e.optional});case"geo":return(0,a.createElement)(J,{input:e,handleBlur:c});case"select":return(0,a.createElement)(le,{input:e,handleBlur:c});case"checkbox":return(0,a.createElement)(ee.A,{sx:{marginBottom:"1rem"},control:(0,a.createElement)(ne.A,{checked:s,onChange:t=>l({input:e,event:t}),onBlur:c,name:e.name,required:!e.optional}),label:(0,oe.Ay)(LOCALIZED.SMS_CONSENT_MESSAGE||e.label)});case"datetime":return(0,a.createElement)(_.$,{dateAdapter:M.h},(0,a.createElement)(S.A,{direction:"row",spacing:4,sx:{marginTop:"1rem",justifyContent:"space-around",width:"100%"}},(0,a.createElement)(I.l,{label:"Select Date",value:o,onChange:t=>n({input:e,event:t}),onAccept:c,disablePast:!0,fullWidth:!0}),(0,a.createElement)(L.A,{label:"Select Time",value:o,onChange:t=>n({input:e,event:t}),onAccept:c,fullWidth:!0})));default:return null}},se=n(4338),ce=[{name:"full_name",type:"row",title:"Contact Information",label:"Please enter your contact information.",inputs:[{name:"full_name",type:"text",label:"Enter your name",value:"",optional:!0}]},{name:"phone",inputs:[{name:"phone",type:"tel",label:"Enter your phone number",value:"",optional:!1},{name:"sms_consent",type:"checkbox",label:"Yes, send me SMS updates and notifications to keep me informed about my roadside service request.",value:!1,optional:!0}]},{name:"service_time",type:"row",title:"When do you need service?",label:"Please verify service date and time.",inputs:[{value:"",type:"datetime",name:"service_time",selected:"",optional:!1}]},{name:"location",type:"row",title:"Where is the vehicle located?",label:"Please verify service location.",inputs:[{name:"location",type:"geo",label:"Search for your location",value:"",obj:{},optional:!0}]},{type:"row",title:"Vehicle Details",label:"Year, Make, Model, and Color",inputs:[{name:"car_year",type:"text",label:"Year",value:"",optional:!0},{name:"car_make",type:"text",label:"Make",value:"",optional:!0},{name:"car_model",type:"text",label:"Model",value:"",optional:!0},{name:"car_color",type:"text",label:"Color",value:"",optional:!0}]},{name:"service_type",inputs:[{value:[],valueId:null,type:"select",name:"service_type",optionsKey:"serviceOptions",options:[],optional:!1}]},{inputs:[{name:"notes",type:"text",label:"Additional Information",value:"",optional:!0}]}];const ue=["full_name","phone","service_time","location","service_type"],de={full_name:e=>""!==e.trim(),phone:e=>""!==e.trim(),service_time:e=>!isNaN(new Date(e).getTime()),location:e=>""!==e.trim(),service_type:e=>Array.isArray(e)&&e.length>0},me=(e,t)=>t.every((t=>((e,t)=>{const n=t.find((t=>t.name===e));return n&&de[e](n.value)})(t,e)));function pe(){const[e]=(0,r.useState)(ce||!1),[t,n]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[v,f]=(0,r.useState)(new Date),[g,A]=(0,r.useState)(!1),[y,E]=(0,r.useState)(null);(0,r.useEffect)((()=>{let e;return window.turnstile&&(e=window.turnstile.render("#turnstile-widget",{sitekey:LOCALIZED.TURNSTILE_SITE_KEY,callback:e=>{E(e)},"expired-callback":()=>{window.turnstile.reset(e)}})),()=>{e&&window.turnstile.remove(e)}}),[]),(0,r.useEffect)((()=>{if(d){const t=e.find((e=>"full_name"===e.name))?.inputs[0]?.value||"";window.location.href=`/book-success?full_name=${encodeURIComponent(t)}`}}),[d]);const _=async()=>{if(!y&&!t||c)return!1;try{u(!0);const t=e.flatMap((e=>e.inputs.map((e=>{const{name:t,value:n,obj:a}=e;return a?{name:t,value:n,obj:a}:{name:t,value:n}})))),n={"Content-Type":"application/json","X-Turnstile-Token":y},a=window.location.origin.replace(/^https?:\/\//,"")+window.location.pathname.replace(/\/$/,""),r=me(t,ue);if(p)await fetch(`${LOCALIZED.API_URL}/submit-lead-form/${p}`,{method:"PUT",headers:n,body:JSON.stringify({submission:t,source:a,completed:r,submitted:d})});else{const e=await fetch(`${LOCALIZED.API_URL}/submit-lead-form`,{method:"POST",headers:n,body:JSON.stringify({submission:t,source:a,completed:r,submitted:d})}),l=await e.json();l?.id&&h(l?.id)}}catch(e){console.error("There was an error",e)}finally{u(!1)}},I=({input:e,event:t})=>{e.value=t?.target?.value},L=({input:e,event:t})=>{e.value=t,f(t)},M=()=>{t&&y&&_()},D=({input:e,event:t})=>{const{checked:n}=t?.target;e.value=n,A(n),M()};return(0,a.createElement)("section",null,(0,a.createElement)(r.Suspense,{fallback:(0,a.createElement)(C.A,null)},(0,a.createElement)(i.A,{className:"phoenix-form"},LOCALIZED.FORM_TITLE&&(0,a.createElement)(x.A,{title:LOCALIZED.FORM_TITLE,subheader:LOCALIZED.FORM_SUBTITLE}),d?(0,a.createElement)(s.A,null,(0,a.createElement)(S.A,{space:2},(0,a.createElement)(k.A,{question:{prompt:LOCALIZED.SUBMISSION_MESSAGE}}))):(0,a.createElement)("form",{"aria-label":"Form Description",autoComplete:"on",noValidate:!0},(0,a.createElement)(s.A,null,(0,a.createElement)(S.A,{space:4},e?.map(((e,t)=>(0,a.createElement)(React.Fragment,{key:t},"row"===e.type?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(w.A,{variant:"subtitle1",sx:{mt:"1rem"},color:"textSecondary"},e.title,(0,a.createElement)(w.A,{variant:"subtitle2",color:"textSecondary"},e.label)),(0,a.createElement)(l.A,{display:"flex",flexDirection:"row",sx:{width:"100%"},gap:2},e.inputs.map(((e,t)=>(0,a.createElement)(ie,{key:t,input:e,handleTextChange:I,handleDateChange:L,handleConsentChange:D,selectedDate:v,setValidPhoneNumber:n,checked:g,setChecked:A,handleBlur:M}))))):e.inputs.map(((e,t)=>(0,a.createElement)(ie,{key:t,input:e,handleTextChange:I,handleDateChange:L,handleConsentChange:D,selectedDate:v,setValidPhoneNumber:n,checked:g,setChecked:A,handleBlur:M}))))))),(0,a.createElement)(l.A,null,(0,a.createElement)(se.A,{index:0}))),(0,a.createElement)(b,{sx:{justifyContent:"end"}},(0,a.createElement)(o.A,{size:"large",variant:"contained",color:"primary",onClick:()=>{m(!0),_()},disabled:!t||!y},"Submit")),c||!y&&(0,a.createElement)(C.A,null),(0,a.createElement)("div",{id:"turnstile-widget",className:"cf-turnstile",style:{display:"flex",justifyContent:"center",margin:"1rem 0",padding:"1rem"},"data-sitekey":LOCALIZED.TURNSTILE_SITE_KEY})))))}},7289:function(e,t,n){n.d(t,{A:function(){return r}});var a=n(1609);function r(){return(0,a.createElement)("svg",{style:{width:"20px",height:"20px",marginRight:"0.5rem",fill:"white"},className:"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1iirmgg",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"MyLocationIcon"},(0,a.createElement)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}))}},3455:function(e,t,n){n.d(t,{A:function(){return c}});var a=n(1609),r=n(1385),l=n(5583),o=n(900),i=n(7636),s=e=>(0,a.createElement)(i.A,{sx:{backgroundColor:"#f0f0f0",borderRadius:"20px",padding:"10px 15px",position:"relative",maxWidth:"80%"},...e}),c=({question:e})=>{var t;const n=null!==(t=LOCALIZED?.ASSETS_URL)&&void 0!==t?t:"";return(0,a.createElement)(l.A,{direction:"row",spacing:2,alignItems:"flex-start"},(0,a.createElement)(r.A,{src:`${n}/avatar.jpg`,alt:"Technician Avatar"}),(0,a.createElement)(s,null,(0,a.createElement)("label",null,(0,o.Ay)(e.prompt))))}}}]);